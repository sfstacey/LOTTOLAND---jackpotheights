/*!
 * skrollr core
 *
 * Alexander Prinzhorn - https://github.com/Prinzhorn/skrollr
 *
 * Free to use under terms of MIT license
 */(function(e,t,n){"use strict";function J(n){u=t.documentElement;a=t.body;W();wt=this;n=n||{};kt=n.constants||{};if(n.easing)for(var r in n.easing)$[r]=n.easing[r];Rt=n.edgeStrategy||"set";xt={beforerender:n.beforerender,render:n.render,keyframe:n.keyframe};Tt=n.forceHeight!==!1;Tt&&(Ct=n.scale||1);Lt=n.mobileDeceleration||x;Bt=n.smoothScrolling!==!1;jt=n.smoothScrollingDuration||N;Ft={targetTop:wt.getScrollTop()};Ut=(n.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||e.opera)})();if(Ut){St=t.getElementById(n.skrollrBody||T);St&&ot();K();vt(u,[g,w],[y])}else vt(u,[g,b],[y]);wt.refresh();ut(e,"resize orientationchange",function(){var e=u.clientWidth,t=u.clientHeight;if(t!==Dt||e!==_t){Dt=t;_t=e;Pt=!0}});var i=X();(function s(){Y();Vt=i(s)})();return wt}var r={get:function(){return wt},init:function(e){return wt||new J(e)},VERSION:"0.6.30"},i=Object.prototype.hasOwnProperty,s=e.Math,o=e.getComputedStyle,u,a,f="touchstart",l="touchmove",c="touchcancel",h="touchend",p="skrollable",d=p+"-before",v=p+"-between",m=p+"-after",g="skrollr",y="no-"+g,b=g+"-desktop",w=g+"-mobile",E="linear",S=1e3,x=.004,T="skrollr-body",N=200,C="start",k="end",L="center",A="bottom",O="___skrollable_id",M=/^(?:input|textarea|button|select)$/i,_=/^\s+|\s+$/g,D=/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,P=/\s*(@?[\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,H=/^(@?[a-z\-]+)\[(\w+)\]$/,B=/-([a-z0-9_])/g,j=function(e,t){return t.toUpperCase()},F=/[\-+]?[\d]*\.?[\d]+/g,I=/\{\?\}/g,q=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,R=/[a-z\-]+-gradient/g,U="",z="",W=function(){var e=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(!o)return;var t=o(a,null);for(var n in t){U=n.match(e)||+n==n&&t[n].match(e);if(U)break}if(!U){U=z="";return}U=U[0];if(U.slice(0,1)==="-"){z=U;U={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[U]}else z="-"+U.toLowerCase()+"-"},X=function(){var t=e.requestAnimationFrame||e[U.toLowerCase()+"RequestAnimationFrame"],n=yt();if(Ut||!t)t=function(t){var r=yt()-n,i=s.max(0,1e3/60-r);return e.setTimeout(function(){n=yt();t()},i)};return t},V=function(){var t=e.cancelAnimationFrame||e[U.toLowerCase()+"CancelAnimationFrame"];if(Ut||!t)t=function(t){return e.clearTimeout(t)};return t},$={begin:function(){return 0},end:function(){return 1},linear:function(e){return e},quadratic:function(e){return e*e},cubic:function(e){return e*e*e},swing:function(e){return-s.cos(e*s.PI)/2+.5},sqrt:function(e){return s.sqrt(e)},outCubic:function(e){return s.pow(e-1,3)+1},bounce:function(e){var t;if(e<=.5083)t=3;else if(e<=.8489)t=9;else if(e<=.96208)t=27;else{if(!(e<=.99981))return 1;t=91}return 1-s.abs(3*s.cos(e*t*1.028)/t)}};J.prototype.refresh=function(e){var r,i,s=!1;if(e===n){s=!0;Et=[];qt=0;e=t.getElementsByTagName("*")}else e.length===n&&(e=[e]);r=0;i=e.length;for(;r<i;r++){var o=e[r],u=o,a=[],f=Bt,l=Rt,c=!1;s&&O in o&&delete o[O];if(!o.attributes)continue;var h=0,d=o.attributes.length;for(;h<d;h++){var v=o.attributes[h];if(v.name==="data-anchor-target"){u=t.querySelector(v.value);if(u===null)throw'Unable to find anchor target "'+v.value+'"';continue}if(v.name==="data-smooth-scrolling"){f=v.value!=="off";continue}if(v.name==="data-edge-strategy"){l=v.value;continue}if(v.name==="data-emit-events"){c=!0;continue}var m=v.name.match(D);if(m===null)continue;var g={props:v.value,element:o,eventType:v.name.replace(B,j)};a.push(g);var y=m[1];y&&(g.constant=y.substr(1));var b=m[2];if(/p$/.test(b)){g.isPercentage=!0;g.offset=(b.slice(0,-1)|0)/100}else g.offset=b|0;var w=m[3],E=m[4]||w;if(!w||w===C||w===k){g.mode="absolute";w===k?g.isEnd=!0:g.isPercentage||(g.offset=g.offset*Ct)}else{g.mode="relative";g.anchors=[w,E]}}if(!a.length)continue;var S,x,T;if(!s&&O in o){T=o[O];S=Et[T].styleAttr;x=Et[T].classAttr}else{T=o[O]=qt++;S=o.style.cssText;x=dt(o)}Et[T]={element:o,styleAttr:S,classAttr:x,anchorTarget:u,keyFrames:a,smoothScrolling:f,edgeStrategy:l,emitEvents:c,lastFrameIndex:-1};vt(o,[p],[])}ct();r=0;i=e.length;for(;r<i;r++){var N=Et[e[r][O]];if(N===n)continue;Z(N);tt(N)}return wt};J.prototype.relativeToAbsolute=function(e,t,n){var r=u.clientHeight,i=e.getBoundingClientRect(),s=i.top,o=i.bottom-i.top;t===A?s-=r:t===L&&(s-=r/2);n===A?s+=o:n===L&&(s+=o/2);s+=wt.getScrollTop();return s+.5|0};J.prototype.animateTo=function(e,t){t=t||{};var r=yt(),i=wt.getScrollTop(),s=t.duration===n?S:t.duration;Ht={startTop:i,topDiff:e-i,targetTop:e,duration:s,startTime:r,endTime:r+s,easing:$[t.easing||E],done:t.done};if(!Ht.topDiff){Ht.done&&Ht.done.call(wt,!1);Ht=n}return wt};J.prototype.stopAnimateTo=function(){Ht&&Ht.done&&Ht.done.call(wt,!0);Ht=n};J.prototype.isAnimatingTo=function(){return!!Ht};J.prototype.isMobile=function(){return Ut};J.prototype.setScrollTop=function(t,n){It=n===!0;Ut?zt=s.min(s.max(t,0),Nt):e.scrollTo(0,t);return wt};J.prototype.getScrollTop=function(){return Ut?zt:e.pageYOffset||u.scrollTop||a.scrollTop||0};J.prototype.getMaxScrollTop=function(){return Nt};J.prototype.on=function(e,t){xt[e]=t;return wt};J.prototype.off=function(e){delete xt[e];return wt};J.prototype.destroy=function(){var e=V();e(Vt);ft();vt(u,[y],[g,b,w]);var t=0,i=Et.length;for(;t<i;t++)st(Et[t].element);u.style.overflow=a.style.overflow="";u.style.height=a.style.height="";St&&r.setStyle(St,"transform","none");wt=n;St=n;xt=n;Tt=n;Nt=0;Ct=1;kt=n;Lt=n;At="down";Ot=-1;_t=0;Dt=0;Pt=!1;Ht=n;Bt=n;jt=n;Ft=n;It=n;qt=0;Rt=n;Ut=!1;zt=0;Wt=n};var K=function(){var r,i,o,p,d,v,m,g,y,b,w,E;ut(u,[f,l,c,h].join(" "),function(e){var u=e.changedTouches[0];p=e.target;while(p.nodeType===3)p=p.parentNode;d=u.clientY;v=u.clientX;b=e.timeStamp;M.test(p.tagName)||e.preventDefault();switch(e.type){case f:r&&r.blur();wt.stopAnimateTo();r=p;i=m=d;o=v;y=b;break;case l:M.test(p.tagName)&&t.activeElement!==p&&e.preventDefault();g=d-m;E=b-w;wt.setScrollTop(zt-g,!0);m=d;w=b;break;default:case c:case h:var a=i-d,S=o-v,x=S*S+a*a;if(x<49){if(!M.test(r.tagName)){r.focus();var T=t.createEvent("MouseEvents");T.initMouseEvent("click",!0,!0,e.view,1,u.screenX,u.screenY,u.clientX,u.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);r.dispatchEvent(T)}return}r=n;var N=g/E;N=s.max(s.min(N,3),-3);var C=s.abs(N/Lt),k=N*C+.5*Lt*C*C,L=wt.getScrollTop()-k,A=0;if(L>Nt){A=(Nt-L)/k;L=Nt}else if(L<0){A=-L/k;L=0}C*=1-A;wt.animateTo(L+.5|0,{easing:"outCubic",duration:C})}});e.scrollTo(0,0);u.style.overflow=a.style.overflow="hidden"},Q=function(){var e=u.clientHeight,t=ht(),n,r,i,o,a,f,l,c,h,p,d;c=0;h=Et.length;for(;c<h;c++){n=Et[c];r=n.element;i=n.anchorTarget;o=n.keyFrames;a=0;f=o.length;for(;a<f;a++){l=o[a];p=l.offset;d=t[l.constant]||0;l.frame=p;if(l.isPercentage){p*=e;l.frame=p}if(l.mode==="relative"){st(r);l.frame=wt.relativeToAbsolute(i,l.anchors[0],l.anchors[1])-p;st(r,!0)}l.frame+=d;Tt&&!l.isEnd&&l.frame>Nt&&(Nt=l.frame)}}Nt=s.max(Nt,pt());c=0;h=Et.length;for(;c<h;c++){n=Et[c];o=n.keyFrames;a=0;f=o.length;for(;a<f;a++){l=o[a];d=t[l.constant]||0;l.isEnd&&(l.frame=Nt-l.offset+d)}n.keyFrames.sort(bt)}},G=function(e,t){var n=0,s=Et.length;for(;n<s;n++){var o=Et[n],u=o.element,a=o.smoothScrolling?e:t,f=o.keyFrames,l=f.length,c=f[0],h=f[f.length-1],g=a<c.frame,y=a>h.frame,b=g?c:h,w=o.emitEvents,E=o.lastFrameIndex,S,x;if(g||y){if(g&&o.edge===-1||y&&o.edge===1)continue;if(g){vt(u,[d],[m,v]);if(w&&E>-1){lt(u,c.eventType,At);o.lastFrameIndex=-1}}else{vt(u,[m],[d,v]);if(w&&E<l){lt(u,h.eventType,At);o.lastFrameIndex=l}}o.edge=g?-1:1;switch(o.edgeStrategy){case"reset":st(u);continue;case"ease":a=b.frame;break;default:case"set":var T=b.props;for(S in T)if(i.call(T,S)){x=it(T[S].value);S.indexOf("@")===0?u.setAttribute(S.substr(1),x):r.setStyle(u,S,x)}continue}}else if(o.edge!==0){vt(u,[p,v],[d,m]);o.edge=0}var N=0;for(;N<l-1;N++)if(a>=f[N].frame&&a<=f[N+1].frame){var C=f[N],k=f[N+1];for(S in C.props)if(i.call(C.props,S)){var L=(a-C.frame)/(k.frame-C.frame);L=C.props[S].easing(L);x=rt(C.props[S].value,k.props[S].value,L);x=it(x);S.indexOf("@")===0?u.setAttribute(S.substr(1),x):r.setStyle(u,S,x)}if(w&&E!==N){At==="down"?lt(u,C.eventType,At):lt(u,k.eventType,At);o.lastFrameIndex=N}break}}},Y=function(){if(Pt){Pt=!1;ct()}var e=wt.getScrollTop(),t,i=yt(),s;if(Ht){if(i>=Ht.endTime){e=Ht.targetTop;t=Ht.done;Ht=n}else{s=Ht.easing((i-Ht.startTime)/Ht.duration);e=Ht.startTop+s*Ht.topDiff|0}wt.setScrollTop(e,!0)}else if(!It){var o=Ft.targetTop-e;o&&(Ft={startTop:Ot,topDiff:e-Ot,targetTop:e,startTime:Mt,endTime:Mt+jt});if(i<=Ft.endTime){s=$.sqrt((i-Ft.startTime)/jt);e=Ft.startTop+s*Ft.topDiff|0}}if(It||Ot!==e){At=e>Ot?"down":e<Ot?"up":At;It=!1;var u={curTop:e,lastTop:Ot,maxTop:Nt,direction:At},a=xt.beforerender&&xt.beforerender.call(wt,u);if(a!==!1){G(e,wt.getScrollTop());Ut&&St&&r.setStyle(St,"transform","translate(0, "+ -zt+"px) "+Wt);Ot=e;xt.render&&xt.render.call(wt,u)}t&&t.call(wt,!1)}Mt=i},Z=function(e){var t=0,n=e.keyFrames.length;for(;t<n;t++){var r=e.keyFrames[t],i,s,o,u={},a;while((a=P.exec(r.props))!==null){o=a[1];s=a[2];i=o.match(H);if(i!==null){o=i[1];i=i[2]}else i=E;s=s.indexOf("!")?et(s):[s.slice(1)];u[o]={value:s,easing:$[i]}}r.props=u}},et=function(e){var t=[];q.lastIndex=0;e=e.replace(q,function(e){return e.replace(F,function(e){return e/255*100+"%"})});if(z){R.lastIndex=0;e=e.replace(R,function(e){return z+e})}e=e.replace(F,function(e){t.push(+e);return"{?}"});t.unshift(e);return t},tt=function(e){var t={},n,r;n=0;r=e.keyFrames.length;for(;n<r;n++)nt(e.keyFrames[n],t);t={};n=e.keyFrames.length-1;for(;n>=0;n--)nt(e.keyFrames[n],t)},nt=function(e,t){var n;for(n in t)i.call(e.props,n)||(e.props[n]=t[n]);for(n in e.props)t[n]=e.props[n]},rt=function(e,t,n){var r,i=e.length;if(i!==t.length)throw"Can't interpolate between \""+e[0]+'" and "'+t[0]+'"';var s=[e[0]];r=1;for(;r<i;r++)s[r]=e[r]+(t[r]-e[r])*n;return s},it=function(e){var t=1;I.lastIndex=0;return e[0].replace(I,function(){return e[t++]})},st=function(e,t){e=[].concat(e);var n,r,i=0,s=e.length;for(;i<s;i++){r=e[i];n=Et[r[O]];if(!n)continue;if(t){r.style.cssText=n.dirtyStyleAttr;vt(r,n.dirtyClassAttr)}else{n.dirtyStyleAttr=r.style.cssText;n.dirtyClassAttr=dt(r);r.style.cssText=n.styleAttr;vt(r,n.classAttr)}}},ot=function(){Wt="translateZ(0)";r.setStyle(St,"transform",Wt);var e=o(St),t=e.getPropertyValue("transform"),n=e.getPropertyValue(z+"transform"),i=t&&t!=="none"||n&&n!=="none";i||(Wt="")};r.setStyle=function(e,t,n){var r=e.style;t=t.replace(B,j).replace("-","");if(t==="zIndex")isNaN(n)?r[t]=n:r[t]=""+(n|0);else if(t==="float")r.styleFloat=r.cssFloat=n;else try{U&&(r[U+t.slice(0,1).toUpperCase()+t.slice(1)]=n);r[t]=n}catch(i){}};var ut=r.addEvent=function(t,n,r){var i=function(t){t=t||e.event;t.target||(t.target=t.srcElement);t.preventDefault||(t.preventDefault=function(){t.returnValue=!1;t.defaultPrevented=!0});return r.call(this,t)};n=n.split(" ");var s,o=0,u=n.length;for(;o<u;o++){s=n[o];t.addEventListener?t.addEventListener(s,r,!1):t.attachEvent("on"+s,i);Xt.push({element:t,name:s,listener:r})}},at=r.removeEvent=function(e,t,n){t=t.split(" ");var r=0,i=t.length;for(;r<i;r++)e.removeEventListener?e.removeEventListener(t[r],n,!1):e.detachEvent("on"+t[r],n)},ft=function(){var e,t=0,n=Xt.length;for(;t<n;t++){e=Xt[t];at(e.element,e.name,e.listener)}Xt=[]},lt=function(e,t,n){xt.keyframe&&xt.keyframe.call(wt,e,t,n)},ct=function(){var e=wt.getScrollTop();Nt=0;Tt&&!Ut&&(a.style.height="");Q();Tt&&!Ut&&(a.style.height=Nt+u.clientHeight+"px");Ut?wt.setScrollTop(s.min(wt.getScrollTop(),Nt)):wt.setScrollTop(e,!0);It=!0},ht=function(){var e=u.clientHeight,t={},n,r;for(n in kt){r=kt[n];typeof r=="function"?r=r.call(wt):/p$/.test(r)&&(r=r.slice(0,-1)/100*e);t[n]=r}return t},pt=function(){var e=0,t;St&&(e=s.max(St.offsetHeight,St.scrollHeight));t=s.max(e,a.scrollHeight,a.offsetHeight,u.scrollHeight,u.offsetHeight,u.clientHeight);return t-u.clientHeight},dt=function(t){var n="className";if(e.SVGElement&&t instanceof e.SVGElement){t=t[n];n="baseVal"}return t[n]},vt=function(t,r,i){var s="className";if(e.SVGElement&&t instanceof e.SVGElement){t=t[s];s="baseVal"}if(i===n){t[s]=r;return}var o=t[s],u=0,a=i.length;for(;u<a;u++)o=gt(o).replace(gt(i[u])," ");o=mt(o);var f=0,l=r.length;for(;f<l;f++)gt(o).indexOf(gt(r[f]))===-1&&(o+=" "+r[f]);t[s]=mt(o)},mt=function(e){return e.replace(_,"")},gt=function(e){return" "+e+" "},yt=Date.now||function(){return+(new Date)},bt=function(e,t){return e.frame-t.frame},wt,Et,St,xt,Tt,Nt=0,Ct=1,kt,Lt,At="down",Ot=-1,Mt=yt(),_t=0,Dt=0,Pt=!1,Ht,Bt,jt,Ft,It,qt=0,Rt,Ut=!1,zt=0,Wt,Xt=[],Vt;typeof define=="function"&&define.amd?define([],function(){return r}):typeof module!="undefined"&&module.exports?module.exports=r:e.skrollr=r})(window,document);